<div #content class="grid__content">
  <div #header>
    <ng-content select="[header]"></ng-content>
  </div>

  <div
    #items
    class="grid__items"
    [style.maxWidth.px]="maxWidth ? maxWidth : null"
    [style.width.px]="countOfColsToAdd ? (grid.cols * grid.cellWidth + grid.colsTotalGaps) * scale : null"
    [style.height.px]="countOfRowsToAdd ? (grid.rows * grid.cellHeight + grid.rowsTotalGaps) * scale : null"
  >
    <ng-container *ngIf="background">
      <ng-container
        *ngTemplateOutlet="background.template; context: { $implicit: { scale, rows: grid.rows, cols: grid.cols, colsGaps: grid.colsGaps.slice(0, -1), rowsGaps: grid.rowsGaps.slice(0, -1), colsTotalGaps: grid.colsTotalGaps, rowsTotalGaps: grid.rowsTotalGaps } }"
      />
    </ng-container>

    <ng-content></ng-content>

    <kc-grid-item
      *kcGrid="let item; id as id"
      [id]="id"
      [item]="item"
      [scale]="scale"
      [gridRef]="items"
      [gridItem]="gridItem"
      class="grid__item"
    ></kc-grid-item>
  </div>

  <div #footer>
    <ng-content select="[footer]"></ng-content>
  </div>
</div>
